{"version":3,"sources":["weather.es6"],"names":[],"mappings":"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","file":"weather.js","sourcesContent":["/**\n * Class for getting weather data using OpenWeatherMap\n * @see http://openweathermap.org/current\n */\nclass OpenWeatherMap {\n\tconstructor(version = 2.5) {\n\t\tlet url = new URL(`http://api.openweathermap.org/data/${version}/weather`);\n\t\tlet headers = new Headers();\n\t\tthis.getLocation().then(location => {\n\t\t\tconsole.log(location);\n\t\t\turl.searchParams.set('lat', location.coords.latitude);\n\t\t\turl.searchParams.set('lon', location.coords.longitude);\n\t\t\tfetch(url, {\n\t\t\t\tmethod: 'GET',\n\t\t\t\tmode: 'cors',\n\t\t\t\theaders\n\t\t\t}).then(resp => {\n\t\t\t\tif (resp.ok) {\n\t\t\t\t\tlet type = resp.headers.get('Content-Type').toLowerCase();\n\t\t\t\t\tif (type.startsWith('application/json')) {\n\t\t\t\t\t\treturn resp.json();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`Unsupported Content-Type: ${type}`);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(`${resp.status}: ${resp.statusText}`);\n\t\t\t\t}\n\t\t\t}).then(data => {\n\t\t\t\tlet main = document.querySelector('main');\n\t\t\t\tlet city = document.createElement('h3');\n\t\t\t\tlet temp = document.createElement('samp');\n\t\t\t\ttemp.textContent = `Current temperature: ${OpenWeatherMap.getTemp(data.main.temp).toFixed(1)}Â°`;\n\t\t\t\tcity.textContent = `Current weather in ${data.name}`;\n\t\t\t\tmain.appendChild(city);\n\t\t\t\tmain.appendChild(temp);\n\t\t\t\tconsole.dir(data);\n\t\t\t});\n\t\t}).catch(err => console.error(err));\n\t}\n\n\tstatic getTemp(temp, to = 'Fahrenheit', from = 'Kelvin') {\n\t\tif (from === to) {\n\t\t\treturn temp;\n\t\t} else {\n\t\t\tswitch(to) {\n\t\t\t\tcase 'Fahrenheit':\n\t\t\t\t\tswitch(from) {\n\t\t\t\t\t\tcase 'Kelvin':\n\t\t\t\t\t\t\treturn (temp - 273.15) * 1.8 + 32;\n\n\t\t\t\t\t\tcase 'Celsius':\n\t\t\t\t\t\t\treturn temp * 1.8 + 32;\n\t\t\t\t\t}\n\t\t\t\tcase 'Celsius':\n\t\t\t\t\tswitch(from) {\n\t\t\t\t\t\tcase 'Fahrenheit':\n\t\t\t\t\t\t\treturn (temp - 32) / 1.8;\n\n\t\t\t\t\t\tcase 'Kelvin':\n\t\t\t\t\t\t\treturn temp + 273.15;\n\t\t\t\t\t}\n\t\t\t\tcase 'Kelvin':\n\t\t\t\t\tswitch(from) {\n\t\t\t\t\t\tcase 'Fahrenheit':\n\t\t\t\t\t\t\treturn (temp - 32) / 1.8 + 273.15;\n\n\t\t\t\t\t\tcase 'Celsius':\n\t\t\t\t\t\t\treturn temp + 273.15;\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetLocation(options = {}) {\n\t\treturn new Promise(function(success, fail) {\n\t\t\tif (!('geolocation' in navigator)) {\n\t\t\t\tfail('Your browser does not support GeoLocation');\n\t\t\t}\n\t\t\tnavigator.geolocation.getCurrentPosition(success, fail, options);\n\t\t});\n\t}\n}\n"]}